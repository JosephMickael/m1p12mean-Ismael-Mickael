<div class="container mt-5">
  <h2 class="text-center mb-4">Gestion de devis</h2>

  <!-- Formulaire de création de devis -->
  <div class="card mb-4">
    <div class="card-header bg-primary text-white">
      <h3>Créer un nouveau devis</h3>
    </div>
    <div class="card-body">
      <form (ngSubmit)="creerDevis()">
        <div class="form-group">
          <label for="client">Client:</label>
          <input type="text" class="form-control" [(ngModel)]="newDevis.client" name="client" required>
        </div>

        <div class="form-group">
          <label for="mecanicien">Mécanicien:</label>
          <input type="text" class="form-control" [(ngModel)]="newDevis.mecanicien" name="mecanicien" required>
        </div>

        <div class="form-group">
          <label for="manager">Manager:</label>
          <input type="text" class="form-control" [(ngModel)]="newDevis.manager" name="manager" required>
        </div>

        <div class="form-group">
          <label for="services">Services:</label>
          <input type="text" class="form-control" [(ngModel)]="newDevis.services" name="services" required>
        </div>

        <div class="form-group">
          <label for="pieces">Pièces:</label>
          <input type="text" class="form-control" [(ngModel)]="newDevis.pieces" name="pieces" required>
        </div>

        <button type="submit" class="btn btn-success mt-3">Créer le devis</button>
      </form>
    </div>
  </div>

  <!-- Liste des devis -->
  <div class="card">
    <div class="card-header bg-info text-white">
      <h3>Liste des devis</h3>
    </div>
    <div class="card-body">
      <table class="table table-bordered">
        <thead class="thead-dark">
          <tr>
            <th>Client</th>
            <th>Mécanicien</th>
            <th>Manager</th>
            <th>Services</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let devis of devis">
            <td>{{ devis.client }}</td>
            <td>{{ devis.mecanicien }}</td>
            <td>{{ devis.manager }}</td>
            <td>{{ devis.services }}</td>
            <td>
              <button class="btn btn-warning btn-sm" (click)="selectDevis(devis)">Modifier</button>
              <button class="btn btn-success btn-sm" (click)="validerDevis(devis._id)">Valider</button>
              <button class="btn btn-danger btn-sm" (click)="supprimerDevis(devis._id)">Supprimer</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Formulaire de modification de devis -->
  <div *ngIf="selectedDevis" class="card mt-4">
    <div class="card-header bg-warning text-white">
      <h3>Modifier un devis</h3>
    </div>
    <div class="card-body">
      <form (ngSubmit)="modifierDevis(selectedDevis._id)">
        <div class="form-group">
          <label for="client">Client:</label>
          <input type="text" class="form-control" [(ngModel)]="selectedDevis.client" name="client" required>
        </div>

        <div class="form-group">
          <label for="mecanicien">Mécanicien:</label>
          <input type="text" class="form-control" [(ngModel)]="selectedDevis.mecanicien" name="mecanicien" required>
        </div>

        <div class="form-group">
          <label for="manager">Manager:</label>
          <input type="text" class="form-control" [(ngModel)]="selectedDevis.manager" name="manager" required>
        </div>

        <div class="form-group">
          <label for="services">Services:</label>
          <input type="text" class="form-control" [(ngModel)]="selectedDevis.services" name="services" required>
        </div>

        <div class="form-group">
          <label for="pieces">Pièces:</label>
          <input type="text" class="form-control" [(ngModel)]="selectedDevis.pieces" name="pieces" required>
        </div>

        <button type="submit" class="btn btn-warning mt-3">Mettre à jour le devis</button>
      </form>
    </div>
  </div>
</div>
